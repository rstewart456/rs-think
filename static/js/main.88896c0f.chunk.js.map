{"version":3,"sources":["firebase.js","components/CurrentUser.jsx","components/SignIn.jsx","components/SignUp.jsx","components/SignInAndSignUp.jsx","providers/UserProvider.jsx","components/Authentication.jsx","components/Post.jsx","components/AddPost.jsx","utilities.js","providers/PostProvider.jsx","components/Posts.jsx","components/UserProfile.jsx","components/Comment.jsx","components/AddComment.jsx","components/Comments.jsx","components/withUser.jsx","components/PostPage.jsx","components/Application.jsx","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firestore","auth","storage","provider","GoogleAuthProvider","signInWithGoogle","signInWithPopup","signOut","window","createUserProfileDocument","user","additionalData","a","async","userRef","doc","uid","get","exists","displayName","email","photoURL","createdAt","Date","set","console","error","message","getUserDocument","collection","CurrentUser","children","className","src","alt","to","moment","calendar","onClick","defaultProps","SignIn","state","password","handleChange","event","target","name","value","setState","handleSubmit","preventDefault","this","onSubmit","type","placeholder","onChange","Component","SignUp","createUserWithEmailAndPassword","log","SignInAndSignUp","UserContext","createContext","UserProvider","unsubscribeFromAuth","componentDidMount","onAuthStateChanged","userAuth","onSnapshot","snapshot","id","data","componentWillUnmount","props","Provider","Authentication","loading","useContext","Post","postAuthor","title","content","stars","comments","currentUser","postRef","role","aria-label","update","delete","AddPost","post","favorites","add","collectIdsAndData","PostsContext","PostsProvider","posts","unsubscribeFromFirestore","orderBy","docs","map","Posts","key","UserProfile","imageInput","file","ref","child","put","then","response","getDownloadURL","files","Comment","AddComment","onCreate","Comments","comment","withUser","WrappedComponent","Consumer","dispalyName","getDisplayName","PostPage","loaded","unsubscribeFromPost","unsubscribeFromComments","commentsRef","createComment","postId","match","params","withRouter","Application","exact","path","component","render","document","getElementById"],"mappings":"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","file":"static/js/main.88896c0f.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\nimport 'firebase/storage'\r\n\r\n\r\nconst config = {\r\n  apiKey: \"AIzaSyB5mZksIwKC93gPi1p3uc5A0HNERkBcQ1c\",\r\n  authDomain: \"think-piece-cb5eb.firebaseapp.com\",\r\n  databaseURL: \"https://think-piece-cb5eb.firebaseio.com\",\r\n  projectId: \"think-piece-cb5eb\",\r\n  storageBucket: \"think-piece-cb5eb.appspot.com\",\r\n  messagingSenderId: \"603056826506\",\r\n  appId: \"1:603056826506:web:5cc4eeb9a34d438e\"\r\n};\r\n\r\nfirebase.initializeApp(config);\r\n\r\nexport const firestore = firebase.firestore();\r\nexport const auth = firebase.auth();\r\nexport const storage = firebase.storage();\r\nexport const provider = new firebase.auth.GoogleAuthProvider();\r\nexport const signInWithGoogle = () => auth.signInWithPopup(provider);\r\nexport const signOut = () => auth.signOut();\r\n\r\nwindow.firebase = firebase;\r\n\r\nexport const createUserProfileDocument = async (user, additionalData) => {\r\n  if(!user) return;\r\n\r\n  //Get a reference to the place in the database where a user profile might be. //\r\n  const userRef = firestore.doc(`users/${user.uid}`);\r\n\r\n  // Go and fetch the docuemnet from that location. //\r\n  const snapshot = await userRef.get();\r\n\r\n  if (!snapshot.exists) {\r\n    const { displayName, email, photoURL } = user;\r\n    const createdAt = new Date();\r\n    try {\r\n      await userRef.set({\r\n        displayName,\r\n        email,\r\n        photoURL,\r\n        createdAt,\r\n        ...additionalData,\r\n      });\r\n    } catch (error) {\r\n      console.error('Error creating user', error.message);\r\n    }\r\n  }\r\n\r\n  return getUserDocument(user.uid);\r\n};\r\n\r\nexport const getUserDocument = async uid => {\r\n  if (!uid) return null;\r\n  try {\r\n    return firestore.collection('users').doc(uid)\r\n    } catch (error) {\r\n    console.error('Error fetching user', error.message);\r\n  }\r\n}\r\n\r\nexport default firebase;","import React from \"react\";\r\n\r\nimport moment from \"moment\";\r\nimport { signOut } from \"../firebase\";\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst CurrentUser = ({ displayName, photoURL, email, createdAt, children }) => {\r\n  return (\r\n    <section className=\"CurrentUser\">\r\n      <div className=\"CurrentUser--profile\">\r\n        {photoURL && <img src={photoURL} alt={displayName} />}\r\n        <div className=\"CurrentUser--information\">\r\n          <Link to=\"/profile\">\r\n            <h2>{displayName}</h2>\r\n          </Link>\r\n          <p className=\"email\">{email}</p>\r\n          <p className=\"created-at\">{moment(createdAt.Date).calendar()}</p>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <div>{children}</div>\r\n        <button onClick={signOut}>Sign Out</button>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nCurrentUser.defaultProps = {\r\n  displayName: \"Bill Murray\",\r\n  email: \"billmurray@mailinator.com\",\r\n  photoURL: \"https://www.fillmurray.com/300/300\",\r\n  createdAt: new Date()\r\n};\r\n\r\nexport default CurrentUser;\r\n","import React, { Component } from \"react\";\r\nimport { signInWithGoogle } from \"../firebase\";\r\n\r\nclass SignIn extends Component {\r\n  state = { email: \"\", password: \"\" };\r\n\r\n  handleChange = event => {\r\n    const { name, value } = event.target;\r\n\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n\r\n    this.setState({ email: \"\", password: \"\" });\r\n  };\r\n\r\n  render() {\r\n    const { email, password } = this.state;\r\n\r\n    return (\r\n      <form className=\"SignIn\" onSubmit={this.handleSubmit}>\r\n        <h2>Sign In</h2>\r\n        <input\r\n          type=\"email\"\r\n          name=\"email\"\r\n          placeholder=\"Email\"\r\n          value={email}\r\n          onChange={this.handleChange}\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"Password\"\r\n          value={password}\r\n          onChange={this.handleChange}\r\n        />\r\n        <input type=\"submit\" value=\"Sign In\" />\r\n        <button onClick={signInWithGoogle}>Sign In With Google</button>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SignIn;\r\n","import React, { Component } from \"react\";\r\nimport { auth, createUserProfileDocument } from \"../firebase\";\r\n\r\nclass SignUp extends Component {\r\n  state = { displayName: \"\", email: \"\", password: \"\" };\r\n\r\n  handleChange = event => {\r\n    const { name, value } = event.target;\r\n\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleSubmit = async event => {\r\n    event.preventDefault();\r\n\r\n    const { email, password, displayName } = this.state;\r\n\r\n    try {\r\n      const { user } = await auth.createUserWithEmailAndPassword(\r\n        email, \r\n        password\r\n        );\r\n    \r\n      createUserProfileDocument(user, { displayName })\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n\r\n    this.setState({ displayName: '', email: '', password: '' });\r\n  };\r\n\r\n  render() {\r\n    const { displayName, email, password } = this.state;\r\n\r\n    return (\r\n      <form className=\"SignUp\" onSubmit={this.handleSubmit}>\r\n        <h2>Sign Up</h2>\r\n        <input\r\n          type=\"text\"\r\n          name=\"displayName\"\r\n          placeholder=\"Display Name\"\r\n          value={displayName}\r\n          onChange={this.handleChange}\r\n        />\r\n        <input\r\n          type=\"email\"\r\n          name=\"email\"\r\n          placeholder=\"Email\"\r\n          value={email}\r\n          onChange={this.handleChange}\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          placeholder=\"Password\"\r\n          value={password}\r\n          onChange={this.handleChange}\r\n        />\r\n        <input type=\"submit\" value=\"Sign Up\" />\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SignUp;\r\n","import React from \"react\";\r\n\r\nimport SignIn from \"./SignIn\";\r\nimport SignUp from \"./SignUp\";\r\n\r\nconst SignInAndSignUp = () => (\r\n  <div>\r\n    <SignIn />\r\n    <SignUp />\r\n  </div>\r\n);\r\n\r\nexport default SignInAndSignUp;\r\n","import React, { Component, createContext } from 'react';\r\nimport { auth, createUserProfileDocument } from '../firebase'\r\n\r\nexport const UserContext = createContext({user: null});\r\n\r\nclass UserProvider extends Component {\r\n  state = {\r\n    user: null\r\n  };\r\n\r\n  unsubscribeFromAuth = null;\r\n\r\n  componentDidMount = async () => {\r\n   this.unsubscribeFromAuth = auth.onAuthStateChanged(async userAuth => {\r\n     if (userAuth) {\r\n        const userRef = await createUserProfileDocument(userAuth);         \r\n        userRef.onSnapshot(snapshot => {\r\n            this.setState({ user: { uid: snapshot.id, ...snapshot.data() }})\r\n        })\r\n    }\r\n\r\n     this.setState({ user: userAuth });\r\n   });\r\n  };\r\n\r\n  componentWillUnmount = () => {\r\n    this.unsubscribeFromAuth();\r\n  };\r\n\r\n  render() {\r\n      const {user} = this.state;\r\n      const { children } = this.props;\r\n\r\n      return (\r\n          <UserContext.Provider value={user}>{children}</UserContext.Provider>\r\n      )\r\n  }\r\n}\r\n\r\nexport default UserProvider;","import React, { useContext } from \"react\";\r\n\r\nimport CurrentUser from \"./CurrentUser\";\r\nimport SignInAndSignUp from \"./SignInAndSignUp\";\r\nimport { UserContext } from \"../providers/UserProvider\";\r\n\r\nconst Authentication = ({ loading }) => {\r\n  const user = useContext(UserContext);\r\n\r\n  \r\n  if (loading) return null;\r\n\r\n  return <div>{user ? <CurrentUser {...user} /> : <SignInAndSignUp />}</div>;\r\n};\r\n\r\nexport default Authentication;\r\n","import React, {useContext} from \"react\";\r\n\r\nimport moment from \"moment\";\r\nimport { firestore } from '../firebase';\r\nimport { UserContext } from \"../providers/UserProvider\";\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst belongsToCurrentUser = (CurrentUser, postAuthor) => {\r\n  if (!CurrentUser) return false;\r\n  return CurrentUser.uid === postAuthor.uid;\r\n}\r\n\r\nconst Post = ({ title, content, user, createdAt, stars, comments, id}) => {\r\n  const currentUser = useContext(UserContext);\r\n  \r\n  const postRef = firestore.doc(`posts/${id}`);\r\n\r\n\r\n  return (\r\n    <article className=\"Post\">\r\n      <div className=\"Post--content\">\r\n        <Link to={`/posts/${id}`}>\r\n          <h3>{title}</h3>\r\n        </Link>\r\n        <div>{content}</div>\r\n      </div>\r\n      <div className=\"Post--meta\">\r\n        <div>\r\n          <p>\r\n            <span role=\"img\" aria-label=\"star\">\r\n              ⭐️\r\n            </span>\r\n            {stars}\r\n          </p>\r\n          <p>\r\n            <span role=\"img\" aria-label=\"comments\">\r\n              🙊\r\n            </span>\r\n            {comments}\r\n          </p>\r\n          <p>Posted by {user.displayName}</p>\r\n          <p>{moment(createdAt.Date).calendar()}</p>\r\n        </div>\r\n        <div>\r\n          <button\r\n            className=\"star\"\r\n            onClick={() => postRef.update({ stars: stars + 1 })}\r\n          >\r\n            Star\r\n          </button>\r\n          {belongsToCurrentUser(currentUser, user) && (\r\n            <button className=\"delete\" onClick={() => postRef.delete()}>\r\n              Delete\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </article>\r\n  );\r\n};\r\n\r\nPost.defaultProps = {\r\n  title: \"An Incredibly Hot Take\",\r\n  content:\r\n    \"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ducimus est aut dolorem, dolor voluptatem assumenda possimus officia blanditiis iusto porro eaque non ab autem nihil! Alias repudiandae itaque quo provident.\",\r\n  user: {\r\n    id: \"123\",\r\n    displayName: \"Bill Murray\",\r\n    email: \"billmurray@mailinator.com\",\r\n    photoURL: \"https://www.fillmurray.com/300/300\"\r\n  },\r\n  createdAt: new Date(),\r\n  stars: 0,\r\n  comments: 0\r\n};\r\n\r\nexport default Post;\r\n","import React, { Component } from \"react\";\r\nimport { firestore, auth } from \"../firebase\";\r\n\r\nclass AddPost extends Component {\r\n  state = { title: \"\", content: \"\" };\r\n\r\n  handleChange = event => {\r\n    const { name, value } = event.target;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n\r\n    const { title, content } = this.state;\r\n    const { uid, displayName, email, photoURL } = auth.currentUser || {};\r\n\r\n    const post = {\r\n      title,\r\n      content,\r\n      user: {\r\n        uid,\r\n        displayName,\r\n        email,\r\n        photoURL,\r\n      },\r\n      favorites: 0,\r\n      comments: 0,\r\n      createdAt: new Date()\r\n    };\r\n\r\n    firestore.collection('posts').add(post);\r\n\r\n    this.setState({ title: \"\", content: \"\" });\r\n  };\r\n\r\n  render() {\r\n    const { title, content } = this.state;\r\n    return (\r\n      <form onSubmit={this.handleSubmit} className=\"AddPost\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"title\"\r\n          placeholder=\"Title\"\r\n          value={title}\r\n          onChange={this.handleChange}\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          name=\"content\"\r\n          placeholder=\"Body\"\r\n          value={content}\r\n          onChange={this.handleChange}\r\n        />\r\n        <input className=\"create\" type=\"submit\" value=\"Create Post\" />\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AddPost;\r\n","export const collectIdsAndData = doc => ({ id: doc.id, ...doc.data() });\r\n","import React, { Component, createContext } from \"react\";\r\nimport { firestore } from \"../firebase\";\r\nimport { collectIdsAndData } from \"../utilities\";\r\n\r\nexport const PostsContext = createContext();\r\n\r\nclass PostsProvider extends Component {\r\n  state = { posts: [] };\r\n\r\n  unsubscribeFromFirestore = null;\r\n\r\n  componentDidMount = () => {\r\n    this.unsubscribeFromFirestore = firestore\r\n      .collection(\"posts\")\r\n      .orderBy(\"createdAt\", \"desc\")\r\n      .onSnapshot(snapshot => {\r\n        const posts = snapshot.docs.map(collectIdsAndData);\r\n        this.setState({ posts });\r\n      });\r\n  };\r\n\r\n  componentWillUnmount = () => {\r\n    this.unsubscribeFromFirestore();\r\n  };\r\n\r\n  render() {\r\n    const { posts } = this.state;\r\n    const { children } = this.props;\r\n\r\n    return (\r\n      <PostsContext.Provider value={posts}>{children}</PostsContext.Provider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PostsProvider;\r\n","import React, { useContext } from \"react\";\r\nimport Post from \"./Post\";\r\nimport AddPost from \"./AddPost\";\r\nimport { PostsContext } from \"../providers/PostProvider\";\r\n\r\nconst Posts = () => {\r\n  const posts = useContext(PostsContext);\r\n  \r\n  return (\r\n    <section className=\"Posts\">\r\n      <AddPost />\r\n      {posts.map(post => (\r\n        <Post {...post} key={post.id} />\r\n      ))}\r\n    </section>\r\n  );\r\n};\r\nexport default Posts;\r\n","import React, { Component } from \"react\";\r\nimport { auth, firestore, storage } from \"../firebase\";\r\n\r\nclass UserProfile extends Component {\r\n  state = { displayName: '' };\r\n  imageInput = null;\r\n\r\n  get uid() {\r\n    return auth.currentUser.uid;\r\n  }\r\n\r\n  get userRef() {\r\n    return firestore.doc(`users/${this.uid}`);\r\n  }\r\n\r\n  get file() {\r\n    return this.imageInput && this.imageInput.files[0];\r\n  }\r\n\r\n  handleChange = event => {\r\n    const { name, value } = event.target;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    const { displayName } = this.state;\r\n\r\n    if (displayName) {\r\n      this.userRef.update({ displayName });\r\n    }\r\n\r\n    if (this.file) {\r\n      storage\r\n        .ref()\r\n        .child('user-profiles')\r\n        .child(this.uid)\r\n        .child(this.file.name)\r\n        .put(this.file)\r\n        .then(response => response.ref.getDownloadURL())\r\n        .then(photoURL => this.userRef.update({ photoURL }))\r\n    }\r\n  };\r\n  render() {\r\n    const { displayName } = this.state;\r\n    return (\r\n      <section className=\"UserProfile\">\r\n        <form onSubmit={this.handleSubmit}>\r\n          <input\r\n            type=\"text\"\r\n            value={displayName}\r\n            name=\"displayName\"\r\n            onChange={this.handleChange}\r\n            placeholder=\"Display Name\"\r\n          />\r\n          <input type=\"file\" ref={ref => this.imageInput = ref} />\r\n          <input className=\"update\" type=\"submit\" />\r\n        </form>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UserProfile;\r\n","import React from \"react\";\r\n\r\nimport moment from \"moment\";\r\n\r\nconst Comment = ({ content, user, createdAt }) => {\r\n  return (\r\n    <article className=\"Comment\">\r\n      <span className=\"Comment--author\">{user.displayName}</span>\r\n      <span className=\"Comment--content\">{content}</span>\r\n      <span className=\"Comment--timestamp\">{moment(createdAt).calendar()}</span>\r\n    </article>\r\n  );\r\n};\r\n\r\nComment.defaultProps = {\r\n  title: \"An Incredibly Hot Take\",\r\n  content:\r\n    \"Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ducimus est aut dolorem, dolor voluptatem assumenda possimus officia blanditiis iusto porro eaque non ab autem nihil! Alias repudiandae itaque quo provident.\",\r\n  user: {\r\n    displayName: \"Bill Murray\",\r\n    email: \"billmurray@mailinator.com\",\r\n    photoURL: \"https://www.fillmurray.com/300/300\"\r\n  },\r\n  createdAt: new Date()\r\n};\r\n\r\nexport default Comment;\r\n","import React, { Component } from \"react\";\r\n\r\nclass AddComment extends Component {\r\n  state = { content: \"\" };\r\n\r\n  handleChange = event => {\r\n    const { name, value } = event.target;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n\r\n    this.props.onCreate(this.state);\r\n\r\n    this.setState({ content: \"\" });\r\n  };\r\n\r\n  render() {\r\n    const { content } = this.state;\r\n    return (\r\n      <form onSubmit={this.handleSubmit} className=\"AddComment\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"content\"\r\n          placeholder=\"Comment\"\r\n          value={content}\r\n          onChange={this.handleChange}\r\n        />\r\n        <input className=\"create\" type=\"submit\" value=\"Create Comment\" />\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AddComment;\r\n","import React from \"react\";\r\nimport Comment from \"./Comment\";\r\nimport AddComment from \"./AddComment\";\r\n\r\nconst Comments = ({ comments, onCreate }) => {\r\n  return (\r\n    <section className=\"Comments\">\r\n      <AddComment onCreate={onCreate} />\r\n      {comments.map(comment => (\r\n        <Comment {...comment} key={comment.id} />\r\n      ))}\r\n    </section>\r\n  );\r\n};\r\nexport default Comments;\r\n","import React from 'react';\r\nimport { UserContext } from '../providers/UserProvider';\r\n\r\nconst getDisplayName = (WrappedComponent) => {\r\n    return WrappedComponent.dispalyName || WrappedComponent.name || 'Component';\r\n}\r\n\r\nconst withUser = Component => {\r\n    const WrappedComponent = props => {\r\n        return (\r\n            <UserContext.Consumer>\r\n                {user => <Component user={user} {...props} /> }\r\n            </UserContext.Consumer>\r\n        );\r\n    }\r\n\r\n    WrappedComponent.dispalyName = `WithUser(${getDisplayName(WrappedComponent)})`\r\n\r\n    return WrappedComponent;\r\n}\r\n\r\nexport default withUser;","import React, { Component } from \"react\";\r\n\r\nimport { withRouter, } from \"react-router-dom\";\r\nimport Post from \"./Post\";\r\nimport Comments from \"./Comments\";\r\nimport { firestore } from \"../firebase\";\r\nimport { collectIdsAndData } from \"../utilities\";\r\nimport withUser from \"./withUser\";\r\n\r\nclass PostPage extends Component {\r\n  state = { post: null, comments: [], loaded: false };\r\n\r\n  get postId() {\r\n    return this.props.match.params.id;\r\n  }\r\n\r\n  get postRef() {\r\n    return firestore.doc(`/posts/${this.postId}`);\r\n  }\r\n\r\n  get commentsRef() {\r\n    return this.postRef.collection(\"comments\");\r\n  }\r\n\r\n  unsubscribeFromPost = [];\r\n  unsubscribeFromComments = [];\r\n\r\n  componentDidMount = async () => {\r\n    this.unsubscribeFromPost = this.postRef.onSnapshot(snapshot => {\r\n      const post = collectIdsAndData(snapshot);\r\n      this.setState({ post, loaded: true });\r\n    });\r\n\r\n    this.unsubscribeFromComments = this.commentsRef.onSnapshot(snapshot => {\r\n      const comments = snapshot.docs.map(collectIdsAndData);\r\n      this.setState({ comments });\r\n    });\r\n  };\r\n\r\n  componentWillUnmount = () => {\r\n    this.unsubscribeFromPost();\r\n    this.unsubscribeFromComments();\r\n  };\r\n\r\n  createComment = comment => {\r\n      const { user } = this.props;\r\n    this.commentsRef.add({\r\n        ...comment,\r\n        user\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { post, comments, loaded } = this.state;\r\n    console.log(this.props);\r\n    if (!loaded) return <p>Loading…</p>;\r\n\r\n    return (\r\n      <section>\r\n        {post && <Post {...post} />}\r\n        <Comments\r\n          comments={comments}\r\n          postId={post.id}\r\n          onCreate={this.createComment}\r\n        />\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(withUser((PostPage)));\r\n","import React, { Component } from \"react\";\r\nimport Authentication from './Authentication'\r\nimport Posts from \"./Posts\";\r\n\r\nimport { Switch, Route, Link } from 'react-router-dom';\r\nimport UserProfile from \"./UserProfile\";\r\nimport PostPage from \"./PostPage\";\r\n\r\nclass Application extends Component {\r\n  render() {\r\n    return (\r\n      <main className=\"Application\">\r\n        <Link to=\"/\">\r\n          <h1>Think Piece</h1>\r\n        </Link>\r\n        <Authentication />\r\n        <Switch>\r\n          <Route exact path=\"/\" component={Posts} />\r\n          <Route exact path=\"/profile\" component={UserProfile} />\r\n          <Route exact path=\"/posts/:id\" component={PostPage} />\r\n        </Switch>\r\n      </main>\r\n    );\r\n  }\r\n}\r\nexport default Application;\r\n","import React from \"react\";\r\nimport { render } from \"react-dom\";\r\n\r\nimport \"./index.scss\";\r\n\r\nimport Application from \"./components/Application\";\r\n\r\nimport PostsProvider from \"./providers/PostProvider\";\r\nimport UserProvider from \"./providers/UserProvider\";\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\n\r\nrender(\r\n  <Router>\r\n    <UserProvider>\r\n      <PostsProvider>\r\n        <Application />\r\n      </PostsProvider>\r\n    </UserProvider>\r\n  </Router>,\r\n  document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}